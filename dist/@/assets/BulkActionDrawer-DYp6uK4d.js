import{j as e,u as ee,r as x,S as Y,L as se,f as P}from"./index-DV2qS2V2.js";import{a as ce}from"./index.prod-C4FqRepv.js";import{C as ae,P as te,A as K}from"./ProductServices-BielbuPd.js";import{C as J}from"./CouponServices-D11jtq1G.js";import{C as X}from"./CurrencyServices-DytmjhKz.js";import{a as g,n as R}from"./toast-sjXkEc6Z.js";import{P as de,M as pe,R as ge,T as Q}from"./ParentCategory-FkLOap5I.js";import{a as me,T as ue}from"./DrawerButton-tfnYq2pB.js";import{u as he,j as xe,l as je}from"./Layout-D7lGHlCj.js";import{u as fe,E as k}from"./index.esm-BWEi8qqD.js";import{L as d}from"./LabelArea-CI6dUafG.js";import{S as A}from"./SwitchToggle-BuHrN9Gw.js";import{u as be}from"./useDisableForDemo-Bk9fMvml.js";const _e=({id:m,name:n,type:w,handleClick:y,isChecked:c})=>e.jsx(e.Fragment,{children:e.jsx("input",{id:m,name:n,type:w,onChange:y,checked:c})}),Oe=({id:m,status:n,category:w,currencyStatusName:y})=>{const c=ee(),{setIsUpdate:p}=x.useContext(Y),j=async t=>{var E,F;try{let a;if(n==="show"?a="hide":a="show",c.pathname==="/categories"||w){const r=await ae.updateStatus(t,{status:a});p(!0),g(r.message)}if(c.pathname==="/products"){const r=await te.updateStatus(t,{status:a});p(!0),g(r.message)}if(c.pathname==="/languages"){const r=await se.updateStatus(t,{status:a});p(!0),g(r.message)}if(c.pathname==="/currencies")if(y==="status"){const r=await X.updateEnabledStatus(t,{status:a});p(!0),g(r.message)}else{const r=await X.updateLiveExchangeRateStatus(t,{live_exchange_rates:a});p(!0),g(r.message)}if(c.pathname==="/attributes"){const r=await K.updateStatus(t,{status:a});p(!0),g(r.message)}if(c.pathname===`/attributes/${c.pathname.split("/")[2]}`){const r=await K.updateChildStatus(t,{status:a});p(!0),g(r.message)}if(c.pathname==="/coupons"){const r=await J.updateStatus(t,{status:a});p(!0),g(r.message)}if(c.pathname==="/our-staff"){const r=await J.updateStaffStatus(t,{status:a});p(!0),g(r.message)}}catch(a){R(a?(F=(E=a==null?void 0:a.response)==null?void 0:E.data)==null?void 0:F.message:a==null?void 0:a.message)}};return e.jsx(ce,{onChange:()=>j(m),checked:n==="show",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})},Z=({register:m,name:n,label:w,placeholder:y,required:c,type:p,value:j})=>e.jsx(e.Fragment,{children:e.jsx(P.Textarea,{className:"border text-sm border-gray-200 focus:border-gray-300 block w-full bg-gray-100",...m(`${n}`,{required:c?`${w} is required!`:!1}),type:p,placeholder:y,name:n,value:j,rows:"4",spellCheck:"false"})}),ye=(m,n="en",w)=>{const[y,c]=x.useState(""),[p,j]=x.useState([]),t=ee(),[E,F]=x.useState(""),[a,r]=x.useState(!0),[M,S]=x.useState(!0),[f,V]=x.useState([]),[b,O]=x.useState([]),[q,G]=x.useState(!1),[z,C]=x.useState(""),{isBulkDrawerOpen:L,closeBulkDrawer:T,setIsUpdate:D}=x.useContext(Y),{handleDisableForDemo:H}=be(),{register:I,handleSubmit:W,watch:_,setValue:o,clearErrors:l,formState:{errors:$}}=fe(),U=async s=>{var v,N,i;if(!H())try{const h={ids:m,categories:f==null?void 0:f.map(u=>u._id),category:(v=b[0])==null?void 0:v._id,productType:[q?"food":"others"],show:s.show,status:a?"show":"hide",tag:JSON.stringify(p)},B={ids:m,status:a?"show":"hide"},re={ids:m,enabled:a?"show":"hide",live_exchange_rates:M?"show":"hide"},le={ids:m,parentId:E,description:s.description,parentName:z,status:a?"show":"hide"},ne={ids:m,option:s.option,status:a?"show":"hide"},oe={ids:m,currentId:w,changeId:s.groupName,status:a?"show":"hide"},ie={ids:m,startTime:s.startTime,endTime:s.endTime,status:a?"show":"hide"};if(t.pathname==="/products"){const u=await te.updateManyProducts(h);D(!0),g(u.message),T()}if(t.pathname==="/coupons"){const u=await J.updateManyCoupons(ie);D(!0),g(u.message),T()}if(t.pathname==="/languages"){const u=await se.updateManyLanguage(B);D(!0),g(u.message),T()}if(t.pathname==="/currencies"){const u=await X.updateManyCurrencies(re);D(!0),g(u.message),T()}if(t.pathname==="/categories"||t.pathname===`/categories/${w}`){const u=await ae.updateManyCategory(le);D(!0),g(u.message),T()}if(t.pathname==="/attributes"){const u=await K.updateManyAttribute(ne);D(!0),g(u.message),T()}if(t.pathname===`/attributes/${t.pathname.split("/")[2]}`){const u=await K.updateManyChildAttribute(oe);D(!0),g(u.message),T()}}catch(h){R(((i=(N=h==null?void 0:h.response)==null?void 0:N.data)==null?void 0:i.message)||(h==null?void 0:h.message))}};return x.useEffect(()=>{if(!L){o("parent"),o("children"),o("type"),o("show"),o("name"),c(""),j([]),l("parent"),l("children"),l("type"),l("name"),o("name"),o("iso_code"),o("call_prefix"),o("currency"),o("zone"),l("name"),l("iso_code"),l("call_prefix"),l("currency"),l("zone"),l("status"),o("name"),o("iso_code"),o("country"),o("zone"),o("description"),l("name"),l("iso_code"),l("country"),l("zone"),l("status"),l("show"),l("description"),O([]),V([]);return}},[o,L,l]),x.useEffect(()=>{c(_("children"))},[_,y]),{register:I,watch:_,handleSubmit:W,onSubmit:U,errors:$,tag:p,setTag:j,published:a,setPublished:r,published2:M,setPublished2:S,checked:E,setChecked:F,selectedCategory:f,setSelectedCategory:V,defaultCategory:b,setDefaultCategory:O,selectCategoryName:z,setSelectCategoryName:C,isFoodItem:q,setIsFoodItem:G}},Le=({ids:m,title:n,lang:w,data:y,childId:c,attributes:p,isCheck:j})=>{const{toggleBulkDrawer:t,isBulkDrawerOpen:E,closeBulkDrawer:F}=x.useContext(Y),{showingTranslateValue:a}=he(),{tag:r,setTag:M,published:S,register:f,onSubmit:V,errors:b,checked:O,setChecked:q,resetRefTwo:G,handleSubmit:z,setPublished:C,selectedCategory:L,setSelectedCategory:T,defaultCategory:D,setDefaultCategory:H,selectCategoryName:I,setSelectCategoryName:W}=ye(m,w,c),_={motionName:"node-motion",motionAppear:!1,onAppearStart:s=>({height:0}),onAppearActive:s=>({height:s.scrollHeight}),onLeaveStart:s=>({height:s.offsetHeight}),onLeaveActive:()=>({height:0})},o=s=>{var N;let v=[];for(let i of s)v.push({title:a(i==null?void 0:i.name),key:i==null?void 0:i.id,children:((N=i==null?void 0:i.children)==null?void 0:N.length)>0&&o(i==null?void 0:i.children)});return v},l=(s,v)=>{var N;return s._id===v?s:(N=s==null?void 0:s.children)==null?void 0:N.reduce((i,h)=>i??l(h,v),void 0)},$=s=>{var N,i;const v=j==null?void 0:j.find(h=>h===s);if((j==null?void 0:j.length)===((i=(N=y[0])==null?void 0:N.children)==null?void 0:i.length))return R("This can't be select as a parent category!");if(v!==void 0)return R("This can't be select as a parent category!");if(s===c)return R("This can't be select as a parent category!");{if(s===void 0)return;q(s);const h=y[0],B=l(h,s);W(a(B==null?void 0:B.name))}},U=`
  .rc-tree-child-tree {
    display: hidden;
  }
  .node-motion {
    transition: all .3s;
    overflow-y: hidden;
  }
`;return e.jsx(e.Fragment,{children:e.jsxs(me,{open:E,onClose:F,parent:null,level:null,placement:"right",children:[e.jsx("button",{onClick:t,className:"absolute z-50 text-red-500 hover:bg-red-100 hover:text-gray-700 transition-colors duration-150 bg-white shadow-md mr-6 mt-6 right-0 left-auto w-10 h-10 rounded-full block text-center",children:e.jsx(xe,{className:"mx-auto"})}),e.jsxs("div",{className:"flex flex-col w-full h-full justify-between",children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsx(ue,{title:`Update Selected ${n}`,description:`Apply changes to the selected ${n} from the list`})}),e.jsx(je.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:z(V),className:"block",children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow w-full h-full max-h-full pb-40 md:pb-32 lg:pb-32 xl:pb-32",children:[n==="Products"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Categorys"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(de,{lang:w,selectedCategory:L,setSelectedCategory:T,setDefaultCategory:H})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Default Category"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(pe,{displayValue:"name",isObject:!0,singleSelect:!0,ref:G,hidePlaceholder:!0,onKeyPressFn:function(){},onRemove:function(){},onSearch:function(){},onSelect:s=>H(s),selectedValues:D,options:L,placeholder:"Default Category"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(A,{handleProcess:C,processOption:S}),e.jsx(k,{errorName:b==null?void 0:b.status})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Product Tags"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(ge,{placeholder:"Product Tag (Write then press enter to add new tag )",tags:r,onChange:s=>M(s)})})]})]}),n==="Coupons"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Start Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(P.Input,{...f("startTime",{required:"Coupon Validation Start Time"}),label:"Coupon Validation Start Time",name:"startTime",type:"datetime-local",placeholder:"Start Time"}),e.jsx(k,{errorName:b.startTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"End Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(P.Input,{...f("endTime",{required:"Coupon Validation End Time"}),label:"Coupon Validation End Time",name:"endTime",type:"datetime-local",placeholder:"End Time"}),e.jsx(k,{errorName:b.endTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(A,{handleProcess:C,processOption:S}),e.jsx(k,{errorName:b.published})]})]})]}),n==="Languages"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:S,handleProcess:C})})]})}),n==="Currencies"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Enabled"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:S,handleProcess:C})})]})}),n==="Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(Z,{register:f,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(k,{errorName:b.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(P.Input,{readOnly:!0,...f("parent",{required:!1}),name:"parent",value:I||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:U}}),e.jsx(Q,{treeData:o(y),selectedKeys:[O],onSelect:s=>$(s[0]),motion:_,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:S,handleProcess:C})})]})]}),n==="Child Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(Z,{register:f,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(k,{errorName:b.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(P.Input,{readOnly:!0,...f("parent",{required:!1}),name:"parent",value:I||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:U}}),e.jsx(Q,{treeData:o(y),selectedKeys:[O],onSelect:s=>$(s[0]),motion:_,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:S,handleProcess:C})})]})]}),n==="Attributes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Options"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(P.Select,{name:"option",...f("option",{required:"Option is required!"}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select type"}),e.jsx("option",{value:"Dropdown",children:"Dropdown"}),e.jsx("option",{value:"Radio",children:"Radio"})]}),e.jsx(k,{errorName:b.option})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:S,handleProcess:C})})]})]}),n==="Attribute Value(s)"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Change Attribute Group"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(P.Select,{name:"groupName",...f("groupName",{required:!1}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select Attribute Group"}),p==null?void 0:p.map((s,v)=>e.jsx("option",{value:s._id,children:a(s==null?void 0:s.name)},v+1))]}),e.jsx(k,{errorName:b.groupName})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(d,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(A,{title:"",processOption:S,handleProcess:C})})]})]})]}),e.jsxs("div",{className:"fixed bottom-0 w-full right-0 py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(P.Button,{onClick:t,className:" text-red-500 hover:bg-red-50 hover:border-red-100 hover:text-red-600 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-500 dark:hover:bg-gray-800 dark:hover:text-red-700",layout:"outline",children:"Cancel"})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(P.Button,{type:"submit",className:"h-12 w-full",children:[" ","Bulk Update ",n]})})]})]})})]})]})})};export{Le as B,_e as C,Oe as S,Z as T};
