import{r as S,f as s,i as y,j as e,S as T,A as P}from"./index-D5MxA1od.js";import{k as A,l as E,r as F,u as B,i as z,g as M}from"./Layout-DbgPFayI.js";import{u as L}from"./useAsync-xvzxQZ3h.js";import{u as U}from"./useFilter-BZw5dTVh.js";import{D as Z,u as O,M as k}from"./DrawerButton-BkpV-hZI.js";import{j as _}from"./index-aUUiDGWv.js";import{E as N}from"./index.esm-ZPkkcAzd.js";import{T as C,D as q,E as J}from"./Title-3MS3Jt8b.js";import{I as f}from"./InputArea-CNMSGC1q.js";import{u as V}from"./useStaffSubmit-LAlW1Y1Q.js";import{S as $}from"./SelectRole-ciB2p-vi.js";import{L as j}from"./LabelArea-ZkaCJrp3.js";import{U as H}from"./Uploader-Coozl85T.js";import{T as W}from"./TableLoading-BNkh70g_.js";import{S as G}from"./Status-CFL1VcZC.js";import{T as K,N as Q}from"./NotFound-Dz2tSxuD.js";import{a as X}from"./index.prod-C1XBFN6V.js";import{A as D}from"./AdminServices-B0AmVkZ6.js";import{n as v,a as Y}from"./toast-CC0M9tzZ.js";import{P as ee}from"./PageTitle-DwbeqDff.js";import{A as se}from"./AnimatedContent-BEAbhOGX.js";import"./iconBase-D3C_Pjot.js";import"./ProductServices-CWHNXDdP.js";import"./index-qSy3_8G1.js";import"./useDisableForDemo-PELIHLpC.js";import"./CouponServices-CylhXyRx.js";import"./CurrencyServices-DSarpw9a.js";import"./spinner-CkndCogW.js";import"./SelectLanguageTwo-C7Uu99KD.js";import"./useTranslationValue-DGDXwxQa.js";import"./_commonjs-dynamic-modules-DcOsajtj.js";import"./react-tooltip.min-BVo38yGE.js";const I=({id:o})=>{const{role:d}=A(),{mode:r}=S.useContext(s.WindmillContext),{register:n,handleSubmit:m,onSubmit:c,errors:i,imageUrl:x,setImageUrl:u,isSubmitting:p,selectedDate:h,setSelectedDate:t,accessedRoutes:g,setAccessedRoutes:b,handleSelectLanguage:w}=V(o),{t:a}=y();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:o?e.jsx(C,{register:n,handleSelectLanguage:w,title:a("UpdateStaff"),description:a("UpdateStaffdescription")}):e.jsx(C,{register:n,handleSelectLanguage:w,title:a("AddStaffTitle"),description:a("AddStaffdescription")})}),e.jsx(E.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsx(s.Card,{className:"overflow-y-scroll flex-grow scrollbar-hide w-full max-h-full",children:e.jsx(s.CardBody,{children:e.jsxs("form",{onSubmit:m(c),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(j,{label:"Staff Image"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(H,{imageUrl:x,setImageUrl:u,folder:"admin",targetWidth:238,targetHeight:238})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(j,{label:"Name"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(f,{required:!0,register:n,label:"Name",name:"name",type:"text",autoComplete:"username",placeholder:"Staff name"}),e.jsx(N,{errorName:i.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(j,{label:"Email"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(f,{required:!0,register:n,label:"Email",name:"email",type:"text",autoComplete:"username",pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,placeholder:"Email"}),e.jsx(N,{errorName:i.email})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(j,{label:"Password"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[o?e.jsx(f,{register:n,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password"}):e.jsx(f,{required:!0,register:n,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password"}),e.jsx(N,{errorName:i.password})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(j,{label:"Contact Number"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(f,{required:!0,register:n,label:"Contact Number",name:"phone",pattern:/^[+]?\d*$/,minLength:6,maxLength:15,type:"text",placeholder:"Phone number"}),e.jsx(N,{errorName:i.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(j,{label:"Joining Date"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(s.Input,{onChange:l=>t(l.target.value),label:"Joining Date",name:"joiningDate",value:h,type:"date",placeholder:a("StaffJoiningDate")}),e.jsx(N,{errorName:i.joiningDate})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(j,{label:"Staff Role"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx($,{register:n,label:"Role",name:"role"}),e.jsx(N,{errorName:i.role})]})]}),d==="Admin"||d==="Super Admin"&&e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(j,{label:"Select Routes to given Access"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(_,{options:F,value:g,className:r,onChange:l=>b(l),labelledBy:"Select Coupon"})})]})]}),e.jsx(Z,{id:o,title:"Staff",zIndex:"z-5",isSubmitting:p})]})})})})]})},le=({id:o,status:d,option:r,staff:n})=>{const{setIsUpdate:m}=S.useContext(T),{role:c}=A(),i=async(x,u)=>{var p,h;if(!(c==="Super Admin"||c==="Admin"))return v("Only Super Admin and Admin can enable/disable any staff!");try{let t;d==="Active"?t="Inactive":t="Active";const g=await D.updateStaffStatus(x,{status:t});m(!0),Y(g.message);return}catch(t){v(t?(h=(p=t==null?void 0:t.response)==null?void 0:p.data)==null?void 0:h.message:t==null?void 0:t.message)}};return e.jsx(e.Fragment,{children:e.jsx(X,{onChange:()=>i(o),checked:d==="Active",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})})},ae=({isOpen:o,onClose:d,staff:r,showingTranslateValue:n})=>{var m,c;return e.jsxs(s.Modal,{isOpen:o,onClose:d,children:[e.jsxs("h1",{className:"text-xl font-medium text-center pb-6 dark:text-gray-300",children:["List of route access for"," ",e.jsx("span",{className:"text-emerald-600",children:n(r==null?void 0:r.name)})]}),e.jsx(s.ModalBody,{children:((m=r==null?void 0:r.access_list)==null?void 0:m.length)>0?e.jsx("ol",{className:"list-disc pl-5",children:(c=r==null?void 0:r.access_list)==null?void 0:c.map((i,x)=>e.jsx("li",{className:"text-sm text-gray-700 dark:text-gray-300 capitalize",children:i},x))}):e.jsx("p",{className:"text-orange-500 py-10 text-lg text-center",children:"This staff not have any route access!"})}),e.jsx(s.ModalFooter,{className:"justify-end",children:e.jsx(s.Button,{className:"w-full sm:w-auto bg-red-400 text-white hover:bg-red-500",layout:"delete",onClick:d,children:"Close"})})]})},te=({staffs:o,lang:d})=>{const{title:r,serviceId:n,handleModalOpen:m,handleUpdate:c,isSubmitting:i,handleResetPassword:x}=O(),{showDateFormat:u,showingTranslateValue:p}=B(),[h,t]=S.useState(null),[g,b]=S.useState(!1),w=l=>{t(l),b(!0)},a=()=>{t(null),b(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(q,{id:n,title:r}),g&&e.jsx(ae,{staff:h,isOpen:g,onClose:a,showingTranslateValue:p}),e.jsx(k,{children:e.jsx(I,{id:n})}),e.jsx(s.TableBody,{children:o==null?void 0:o.map(l=>e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(s.Avatar,{className:"hidden mr-3 md:block bg-gray-50",src:l.image,alt:"staff"}),e.jsx("div",{children:e.jsx("h2",{className:"text-sm font-medium",children:p(l==null?void 0:l.name)})})]})}),e.jsxs(s.TableCell,{children:[e.jsx("span",{className:"text-sm",children:l.email})," "]}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm ",children:l.phone})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:u(l.joiningData)})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm font-semibold",children:l==null?void 0:l.role})}),e.jsx(s.TableCell,{className:"text-center text-xs",children:e.jsx(G,{status:l.status})}),e.jsx(s.TableCell,{className:"text-center",children:e.jsx(le,{id:l==null?void 0:l._id,staff:l,option:"staff",status:l.status})}),e.jsx(s.TableCell,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:()=>w(l),className:"text-gray-400",children:e.jsx(K,{id:"view",Icon:z,title:"View Access Route",bgColor:"#059669"})}),e.jsx(J,{id:l._id,staff:l,isSubmitting:i,handleUpdate:c,handleModalOpen:m,handleResetPassword:x,title:p(l==null?void 0:l.name)})]})})]},l._id))})]})},Me=()=>{const{state:o}=S.useContext(P),{adminInfo:d}=o,{toggleDrawer:r,lang:n}=S.useContext(T),{data:m,loading:c,error:i}=L(()=>D.getAllStaff({email:d.email})),{userRef:x,setRole:u,totalResults:p,resultsPerPage:h,dataTable:t,serviceData:g,handleChangePage:b,handleSubmitUser:w}=U(m),{t:a}=y(),l=()=>{u(""),x.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[a("StaffPageTitle")," "]}),e.jsx(k,{children:e.jsx(I,{})}),e.jsx(se,{children:e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("form",{onSubmit:w,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[e.jsxs("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx(s.Input,{ref:x,type:"search",name:"search",placeholder:a("StaffSearchBy")}),e.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-5 mr-1"})]}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(s.Select,{onChange:R=>u(R.target.value),children:[e.jsx("option",{value:"All",defaultValue:!0,hidden:!0,children:a("StaffRole")}),e.jsx("option",{value:"Admin",children:a("StaffRoleAdmin")}),e.jsx("option",{value:"Cashier",children:a("SelectCashiers")}),e.jsx("option",{value:"Super Admin",children:a("SelectSuperAdmin")})]})}),e.jsx("div",{className:"w-full md:w-56 lg:w-56 xl:w-56",children:e.jsxs(s.Button,{onClick:r,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(M,{})}),a("AddStaff")]})}),e.jsxs("div",{className:"mt-2 md:mt-0 flex items-center xl:gap-x-4 gap-x-1 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx("div",{className:"w-full mx-1",children:e.jsx(s.Button,{type:"submit",className:"h-12 w-full bg-emerald-700",children:"Filter"})}),e.jsx("div",{className:"w-full",children:e.jsx(s.Button,{layout:"outline",onClick:l,type:"reset",className:"px-4 md:py-1 py-3 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:"Reset"})})})]})]})})})}),c?e.jsx(W,{row:12,col:7,width:163,height:20}):i?e.jsx("span",{className:"text-center mx-auto text-red-500",children:i}):(g==null?void 0:g.length)!==0?e.jsxs(s.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:a("StaffNameTbl")}),e.jsx(s.TableCell,{children:a("StaffEmailTbl")}),e.jsx(s.TableCell,{children:a("StaffContactTbl")}),e.jsx(s.TableCell,{children:a("StaffJoiningDateTbl")}),e.jsx(s.TableCell,{children:a("StaffRoleTbl")}),e.jsx(s.TableCell,{className:"text-center",children:a("OderStatusTbl")}),e.jsx(s.TableCell,{className:"text-center",children:a("PublishedTbl")}),e.jsx(s.TableCell,{className:"text-center",children:a("StaffActionsTbl")})]})}),e.jsx(te,{staffs:t,lang:n})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:p,resultsPerPage:h,onChange:b,label:"Table navigation"})})]}):e.jsx(Q,{title:"Sorry, There are no staff right now."})]})};export{Me as default};
